<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="email_template_edi_invoice" name="Primewood Invoice - Send by Email">
    <p>Dear <t t-esc="object.partner_id.name"/>
    <t t-set="access_action" t-value="object.get_access_action()"/>
    <t t-set="access_url" t-value="access_action['type'] == 'ir.actions.act_url' and access_action['url'] or '/report/pdf/account.report_invoice/' + str(object.id)"/>
    <t t-set="is_online" t-value="access_action and access_action['type'] == 'ir.actions.act_url'"/>

    <t t-if="object.partner_id.parent_id">
      (<i><t t-esc="object.partner_id.parent_id.name"/></i>)
    </t>,</p>

    <p>Here is your invoice <strong t-esc="object.number"></strong>
    <span t-if="object.origin">(with reference: ${object.origin} )</span>
    amounting in <strong><t t-esc="object.amount_total"/> <t t-esc="object.currency_id.name"/></strong>
    from <t t-esc="object.company_id.name"/>.
    </p>

    <p t-if="is_online"><a t-att-href="access_url">View Invoice</a></p>

    <p t-if="object.state=='paid'">This invoice is already paid.</p>
    <p t-else="">Please remit payment at your earliest convenience.</p>

    <p>Thank you,</p>
    <p t-if="object.user_id and object.user_id.signature" t-raw="object.user_id.signature"/>
  </template>

  <template id="invoice_notification_email" name="Primewood Invoice Notification Email">
    <t t-set="link-style" t-value="color: #827717; text-decoration:none;" />
    <h1>Invoice <t t-esc="object.record_name" /></h1>
    <div><t t-raw="object.body" />}</div>

    <!-- FOOTER -->
    <hr style="width:1px; color: #cccccc"/>
    <img width="150" height="90" alt="set company logo" t-attf-src="data:image/gif;base64, #{company_id.logo}"/>
    <t t-esc="company.name" /><br/>
    <a t-if="company.email" t-attf-href="mailto:{{ company.email }}" t-att-style="link-style"><t t-esc="company.email" /></a>
    <a t-if="company.website" t-att-href="company.website" t-att-style="link-style"><t t-esc="company-website"/></a>
  </template>

  <template id="mail_template_data_notification_email_default" name="Primewood Notification Email">
    <t t-if="ctx.get('has_button_access')">
      <div itemscope="itemscope" itemtype="http://schema.org/EmailMessage">
        <div itemprop="potentialAction" itemscope="itemscope" itemtype="http://schema.org/ViewAction">
          <link itemprop="target" t-att-href="ctx['button_access']['url']"/>
          <link itemprop="url" t-att-href="ctx['button_access']['url']"/>
          <meta itemprop="name" t-attf-href="View {{ ctx['model_name'] }}"/>
        </div>
      </div>
    </t>


    <!-- % if not ctx['is_discussion'] or not len(ctx['actions']) == 0 or ctx.get('has_button_access'): -->
    <t t-if="not ctx['is_discussion'] or not len(ctx['actions']) == 0 or ctx.get('has_button_access')">
      <div summary="o_mail_notification">
        <!-- % if ctx.get('has_button_access'): -->
        <t t-if="ctx.get('has_button_access')">
          <a t-att-href="ctx['button_access']['url']"><t t-esc="ctx['button_access']['title']"/></a>
        </t>
        <!-- % if ctx.get('has_button_follow'): -->
        <t t-if="ctx.get('has_buttons_follow')">

          <!-- % if ctx.get('has_button_access'): -->
          <t t-if="ctx.get('has_button_access')">
            |
          </t>
          <a t-att-href="ctx['button_follow']['url']"><t t-esc="ctx['button_follow']['title']"/></a>

          <!--    % elif ctx.get('has_button_unfollow'): -->
        </t>
        <t t-elif="ctx.get('has_button_unfollow')">
          <!-- % if ctx.get('has_button_access'): -->
          <t t-if="ctx.get('has_button_access')">
            |
            <!--  % endif -->
          </t>

          <a t-att-href="ctx['button_unfollow']['url']"><t t-esc="ctx['button_unfollow']['title']"/></a>
          <!-- % endif -->
        </t>

        <!-- % if ctx.get('actions'): -->
        <t t-if="ctx.get('actions')">
          <!-- % for action in ctx['actions']: -->
          <t t-foreach="ctx['actions']" t-as="action">
            |
            <a t-att-href="action['url']"><t t-esc="action['title']"/></a>
          </t>
        </t>
      </div>

      <!-- img src="/logo.png" style="padding: 0px; margin: 0px; height: auto; width: 80px;" alt="${user.company_id.name}" -->
    </t>
    <t t-if="ctx.get('subtype') and ctx.get('subtype').internal">
      <strong>Internal note</strong>: replies are not sent to followers.
    </t>

    <t t-raw="object.body"/>

    <t t-if="ctx.get('tracking')">
      <ul>
        <li t-foreach="ctx['tracking']" t-as="tracking">
          <t t-esc="tracking[0]"/> : <t t-esc="tracking[1]"/> -&gt; <t t-esc="tracking[2]"/>
        </li>
      </ul>
    </t>

    <p t-if="ctx.get('signature')"><t t-raw="ctx['signature']"/></p>
  </template>
</odoo>
